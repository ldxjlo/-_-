question_data = { "4~5": {"대근육 운동": ["등을 대고 누운 자세에세 반쯤 뒤집는다.",
                                     "엎드려 놓으면 고개를 잠깐 들었다 내린다.",
                                     "누운 자세에서 두 팔을 잡고 일으켜 앉힐 때 목이 뒤로 쳐지지 않고 따라 올라온다.",
                                     "엎드린 자세에서 가슴을 들고 양팔로 버틴다.",
                                     "엎드린 자세에서 뒤집는다.",
                                     "등을 대고 누운 자세에서 엎드린 자세로 뒤집는다(팔이 몸통에 깔려 있지 않아야 한다).",
                                     "누워 있을 때 자기 발을 잡고 논다.",
                                     "앉혀주면 양손을 짚고 30초 이상 혼자 버티고 앉아 있는다."],
                          "소근육 운동": ["등을 대고 누운 자세에서 두 손을 가슴 부분에 모은다.",
                                     "손에 딸랑이를 쥐여 주면 잠시 쥐고 있다.",
                                     "앉은 자세로 안겨있을 때 양손을 모아 쥐거나 손가락을 만진다.",
                                     "손에 쥐고 있는 딸랑이를 자기 입으로 가져간다.",
                                     "딸랑이를 손 가까이 주면 잡는다.",
                                     "앉은 자세로 안겨있을 때 탁자 위에 장난감을 향해 손을 뻗는다(장난감이 실제로 손에 닿지 않아도 된다).",
                                     "작은 장난감을 집어들 때, 손바닥에 대고 손가락으로 감싸 쥔다.",
                                     "딸랑이를 쥐고 있는 손에 다른 장난감을 주면 쥐고 있던 딸랑이를 떨어뜨리고 새 장난감을 잡는다."],
                          "인지": ["소리가 나는 곳을 쳐다본다.",
                                 "눈앞에서 장난감을 움직이면 시선이 장난감의 움직임을 따라간다.",
                                 "어떤 소리를 듣고 있다가 새로운 소리가 들리면 거기로 관심을 돌린다.",
                                 "자기 손과 손가락을 자세히 바라본다.",
                                 "딸랑이를 흔들거나 바라보거나 입에 넣는 등 딸랑이를 가지고 논다.",
                                 "딸랑이나 숟가락과 같은 물건을 바닥에 두드리면서 논다.",
                                 "장난감이 떨어져 있는 곳을 쳐다본다.",
                                 "친숙한 어른이 안으려고 하면 팔을 벌린다."],
                          "언어": [" '아', '우', '이' 등 의미 없는 발성을 한다.",
                                 "아이를 어르거나 달래면 옹알이로 반응한다.",
                                 "웃을 때 소리를 내며 웃는다.",
                                 "장난감이나 사람을 보고 소리를 내어 반응한다.",
                                 "두 입술을 떨어서 내는 투레질 소리(젖먹이가 하는 '푸푸'같은 소리)를 낸다.",
                                 "'브', '쁘', '프', '므'와 비슷한 소리를 낸다.",
                                 "'엄마' 또는 '아빠'와 비슷한 소리를 낸다(의미 없이 내는 소리도 포함된다).",
                                 "아이에게 '안되요.'라고 하면, 짧은 순간이라도 하던 행동을 멈추고 목소리에 반응한다."],
                          "사회성": ["엄마(보호자)가 자리를 비웠다가 다시 나타나면 엄마(보호자)를 알아보고 울음을 그친다.",
                                  "아이가 엄마(보호자)와 이야기를 하거나 놀 때 엄마(보호자)의 얼굴을 바라본다.",
                                  "어른이 아이를 보며 말하거나 웃기 전에, 어른을 보고 먼저 웃는다.",
                                  "어른들의 얼굴(머리카랑, 코, 안경 등)을 만져보거나 잡아당긴다.",
                                  "거울 속에 보이는 자신의 모습을 보고 웃거나 우얼거린다.",
                                  "아이의 이름을 부르면 듣고 쳐다본다.",
                                  "가족 등 친숙한 사람을 보면 다가가려고 한다.",
                                  "낯가림을 한다(일정한 연령이 되면 낯선 사람을 꺼리는 행동이 정상적으로 나타나며, 이것을 '낯가림'이라고 합니다)."]},
                 "12~13": {"대근육 운동": ["가구를 붙잡은 상태에서 넘어지지 않고 자세를 낮춘다.",
                                     "가구를 양손으로 붙잡고 옆으로 걷는다.",
                                     "가구나 벽에서 손을 떼고 5초 이상 혼자 서 있다.",
                                     "한 손으로 가구를 붙잡고 걷는.",
                                     "아무것도 붙잡지 않고 혼자서 일어선다.",
                                     "한 손을 잡아주면 몇 걸음 걷는다(이미 혼자 잘 걸으면 '잘할 수 있다'로 표기하세요).",
                                     "혼자 두세 발자국 걷는다.",
                                     "혼자 열 발자국 정도 걷는."],
                          "소근육 운동": ["엄지와 다른 손가락을 이용해 작은 과자를 집는다.",
                                     "손잡이를 사용하여 컵을 잡는다.",
                                     "우유병을 혼자서 잡고 먹는다.",
                                     "잡고 있던 물건을 놓치지 않고 내려놓는다.",
                                     "엄지손가락과 집게손가락 끝을 집게 모양 처럼 만들어 작은 알약 크기의 과자를 집는다.",
                                     "바퀴가 달린 장난감을 잡고 앞으로 굴러가도록 민다.",
                                     "(색)연필의 윗부분을 잡는다 [(색)연필의 중간 부분이나 아랫부분을 잡으면 '잘 할 수 있다'로 표기하세요].",
                                     "(색)연필과 종이를 주면 선 을 이리저리 그리며 낙서를 한다."],
                          "인지": ["그림책에 재미있는 그림이 있으면 관심 있게 쳐다본다.",
                                 "리듬에 맞추어 몸을 움직인다.",
                                 "상자 안에서 물건을 꺼낸다.",
                                 "아이가 내는 소리를 어른이 따라 하면, 아이 가 다시 그 소리를 따라 한다.",
                                 "장난감에 있는 버튼을 눌러 소리가 나게 한다.",
                                 "자신이 좋아하는 한 개의 장난감을 가지고 3~4분 정도 논다.",
                                 "아이가 보는 앞에서 작은 장난감을 컵으로 덮고 감추면, 컵을 열어 장난감을 찾는다.",
                                 "다른 사람의 역할을 흉내 낸다. (예: 부모님 이 하는 것처럼 인형을 안거나 업거나 우유 를 먹여 준다.)"],
                          "언어": [" 동작을 보여주지 않고 말로만 '빠이빠이, '짝짜꿍','까꿍'을 시키면 최소한 한 가지를 한다.",
                                 "엄마에게 '엄마', 혹은 아빠에게 '아빠'라고 말한다.",
                                 "웃을 때 소리를 내며 웃는다.",
                                 "장난감이나 사람을 보고 소리를 내어 반응한다.",
                                 "두 입술을 떨어서 내는 투레질 소리(젖먹이가 하는 '푸푸'같은 소리)를 낸다.",
                                 "'브', '쁘', '프', '므'와 비슷한 소리를 낸다.",
                                 "자음과 모음이 합쳐진 소리(자음 옹알이)를 낸다. (예: ‘다’, ‘가’, ‘모’, ‘버’, ‘더’ 등)",
                                 "원하는 것을 손가락으로 가리킨다."],
                          "사회성": ["다른 아이들 옆에서 논다(함께 놀이를 하지는 못해도 된다).",
                                   "어른을 따라서 까꿍 놀이를 한다.",
                                   "어른을 따라서 '빠이빠이'하면서 손을 흔든다.",
                                   "어른의 관심을 끌기 위한 행동을 한다. (예:어른이 못 본 척하면 '예쁜 짓'을 한다.)",
                                   "'짝짜꿍'이나 '곤지곤지' 같은 말만 들어도 양손을 움직거린다.",
                                   "아이에게 손을 내밀어 장난감을 달라고 하면 장난감을 주려고 한다.",
                                   "다른 사람에게 어떤 행동이나 물건을 보여 주고 싶을 때, 그 사람을 끌어당긴다.",
                                   "어른의 도움이 필요할 때 도움을 요청한다."]},
                  "24~25": {"대근육 운동": ["제자리에서 양발을 모아 동시에 깡중 뛴다.",
                                     "계단의 가장 낮은 층에서 양발을 모아 바닥으로 뛰어내린다.",
                                     "서 있는 자세에서 팔을 들어 머리 위로 공을 앞으로 던진다.",
                                     "난간을 붙잡고 한발씩 번갈아 내디디며 계단 을 올라간다.",
                                     "발뒤꿈치를 들어 발끝으로 네 걸음 이상 걷는다(까치발로 네 걸음 이상 걷는다).",
                                     "난간을 붙잡지 않고 한 계단에 양발을 모은 뒤 한발씩 한발씩 계단을 올라간다(좌우 한발 씩 번갈아 올라가도 할 수 있는 것으로 표기 하세요).",
                                     "아무것도 붙잡지 않고 한 발로 1초간 서 있는다.",
                                     "균형을 잡고 안정감 있게 달린다."],
                          "소근육 운동": ["숟가락을 바르게 들어(음식물이 쏟아지지 않도록) 입에 가져간다.",
                                     "블록을 네 개 쌓는다.",
                                     "블록 두 개 이상을 옆으로 나란히 줄을 세운다.",
                                     "문손잡이를 돌려서 연다.",
                                     "(색)연필의 아랫부분을 잡는다.",
                                     "유아용 가위를 주면 실제로 종이를 자르지는 못해도 한 손으로 종이를 잡고 다른 손으로는 가위 날을 벌리고 오므리며 종이를 자르려고 시도한다.",
                                     "신발 끈 구멍이나 구슬 구멍에 끈을 끼운 후 빼낸다.",
                                     "수평선 그리는 시범을 보여 주면 흉내 내어 그린다 (이미 그려져 있는 선 위에 따라 그리는 것은 해당 되지 않는다)."],
                          "인지": ["그림책에 재미있는 그림이 있으면 관심 있게 쳐다본다.",
                                 "리듬에 맞추어 몸을 움직인다.",
                                 "상자 안에서 물건을 꺼낸다.",
                                 "아이가 내는 소리를 어른이 따라 하면, 아이 가 다시 그 소리를 따라 한다.",
                                 "장난감에 있는 버튼을 눌러 소리가 나게 한다.",
                                 "자신이 좋아하는 한 개의 장난감을 가지고 3~4분 정도 논다.",
                                 "아이가 보는 앞에서 작은 장난감을 컵으로 덮고 감추면, 컵을 열어 장난감을 찾는다.",
                                 "다른 사람의 역할을 흉내 낸다. (예: 부모님 이 하는 것처럼 인형을 안거나 업거나 우유 를 먹여 준다.)"],
                          "언어": [" 그림책에 나온 그림과 같은 실제 사물을 찾는다. (예: 열쇠 그림을 보고 실제 열쇠를 찾는다.)",
                                 "동물 그림과 동물 소리를 연결한다.",
                                 "지시에 따라 신체 부위 다섯 곳 이상을 가리 킨다. (예: 눈, 코, 입, 귀, 팔 등)",
                                 "두 개의 물건 중 큰 것과 작은 것을 구분한다.",
                                 "빨간, 노란, 파란 토막들을 섞어 놓으면 같은 색의 토막들끼리 분류한다.",
                                 "동그라미, 네모, 세모와 같이 간단한 도형 맞추기 판에 세 조각 이상 맞춘다.",
                                 "'많다-적다'와 같은 '양'의 개념을 이해한다.(예: 사탕 두 개와 사탕 여섯 개를 놓고 어떤 것이 더 많은지 물었을 때 많은 것을 가리킬 수 있다.)",
                                 "두 개의 선 중 길이가 긴 것과 짧은 것을 구분한다."],
                          "사회성": ["아이가 엄마(보호자)의 관심을 끌기 위해 주변의 물건들이나 멀리 있는 사물을 손가락 으로 가리킨다.",
                                   "즐겁게 하던 것을 못하게 하면, ‘싫다'라고 말이나 동작으로 표현한다.",
                                   "엄마(보호자)의 관심을 끌기 위해 흥미 있는 물건이나 자신이 만든 것, 그린 것 등 을 가져다 보여 준다.",
                                   "어른이 시키면 ‘미안해.’, ‘고마워.’라는 말 을 한다.",
                                   "다른 아이들의 행동을 보고 (간단한) 놀이의 규칙을 따른다.",
                                   "자신의 기분을 좋으면 좋다고, 나쁘면 나쁘다고 표현할 수 있다.",
                                   "3~4명과 어울려서 숨바꼭질, 술래잡기 등 을 한다.",
                                   "자기 손에 닿지 않는 물건을 다른 사람에게 건네 달라고 부탁한다. (예: '물 좀 주세요.')"]}}

import tkinter as tk
from tkinter import messagebox, simpledialog

def center_window(window):
    def adjust_position():
        window.update_idletasks()
        width = window.winfo_width()
        height = window.winfo_height()
        screen_width = window.winfo_screenwidth()
        screen_height = window.winfo_screenheight()
        x = int((screen_width - width) / 2)
        y = int((screen_height - height) / 2)
        window.geometry(f"+{x}+{y}")
        
        
   
    # 창이 완전히 생성된 후 위치 조정
    window.after(10, adjust_position)
    
class DevelopmentArea:
    def __init__(self, name, questions):
        self.name = name
        self.questions = questions
        self.scores = []
        self.current_question_index = 0

    def conduct_assessment(self, root, on_complete):
        self.root = root
        self.on_complete = on_complete
        self.ask_question()

    

    def ask_question(self):
        if self.current_question_index < len(self.questions):
            self.popup = tk.Toplevel(self.root)
            self.popup.title(f"{self.name} 검사")
            self.popup.withdraw()
            center_window(self.popup)
            self.popup.deiconify()
            


            question_label = tk.Label(self.popup, text=self.questions[self.current_question_index], font=("Arial", 14))
            question_label.pack(padx=20, pady=10)

            self.score_var = tk.IntVar()

            for val, label in enumerate(["전혀 할 수 없다", "하지 못하는 편이다", "할 수 있는 편이다", "잘 할 수 있다"]):
                tk.Radiobutton(self.popup, text=label, variable=self.score_var, value=val, font=("Arial", 12)).pack(anchor="w", padx=20)

            submit_btn = tk.Button(self.popup, text="제출", command=self.submit_score)
            submit_btn.pack(pady=10)
        else:
            self.on_complete(self)

    def submit_score(self):
        score = self.score_var.get()
        if score is None:
            messagebox.showwarning("입력 오류", "점수를 선택해 주세요.")
            return

        self.scores.append(score)
        self.current_question_index += 1
        self.popup.destroy()
        self.ask_question()

    def total_score(self):
        return sum(self.scores)

    def interpret_result(self):
        max_score = len(self.questions) * 3
        if self.total_score() >= max_score * 0.8:
            return "정상 발달"
        elif self.total_score() >= max_score * 0.5:
            return "지속 관찰 필요"
        else:
            return "심화평가 권고"

def start_assessment(age):
    root = tk.Tk()
    root.withdraw()

    areas_data = question_data[age]
    areas = [DevelopmentArea(name, qs) for name, qs in areas_data.items()]

    def next_area(index):
        if index < len(areas):
            areas[index].conduct_assessment(root, lambda _: next_area(index + 1))
        else:
            show_results()

    def show_results():
        result_popup = tk.Toplevel(root)
        result_popup.title("검사 결과")
        center_window(result_popup)

        result_text = tk.Text(result_popup, height=20, width=50)
        result_text.pack(padx=10, pady=10)

        result_text.insert(tk.END, f"{age}개월 아동 발달 검사 결과:\n\n")
        for area in areas:
            max_score = len(area.questions) * 3
            result_text.insert(tk.END, f"- {area.name} 점수: {area.total_score()} / {max_score} → {area.interpret_result()}\n")

        result_text.insert(tk.END, "\n💡 본 검사는 참고용입니다. 반복적인 이상 소견이 나타날 경우 전문가 상담을 권장드립니다.")

        result_text.config(state="disabled")

    next_area(0)
    root.mainloop()

# 시작 시 사용자에게 나이 입력받기
def ask_age():
    def on_submit():
        age = age_var.get()
        if age not in question_data:
            messagebox.showerror("오류", f"{age}개월용 질문지가 없습니다.")
        else:
            age_window.destroy()
            start_assessment(age)

    
    age_window = tk.Tk()
    age_window.title("아동 개월 수 입력")
    center_window(age_window)
    
    tk.Label(age_window, text="검사할 개월 수를 입력하세요 ( 4~5, 12~13, 24~25 )", font=("Arial", 12)).pack(padx=10, pady=10)
    age_var = tk.StringVar()
    tk.Entry(age_window, textvariable=age_var).pack(pady=5)
    tk.Button(age_window, text="검사 시작", command=on_submit).pack(pady=10)

    age_window.mainloop()

ask_age()

